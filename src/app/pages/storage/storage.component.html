<div class="container w-screen p-2 pb-10 mx-auto bg-white rounded-md">
  <div class="p-4">
    <div class="flex">

      <div class="w-1/4 pr-4">
        <h2 class="mb-2 text-lg font-semibold">Folders</h2>
        <div class="mb-2">
          <label class="block mb-2 text-sm font-medium text-gray-900" for="newRootFolderName">New Root Folder
            Name</label>
          <div class="flex items-center">
            <input [(ngModel)]="newRootFolderName"
              class="w-48 p-2 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none"
              id="newRootFolderName" type="text">
            <button class="p-2 ml-2 text-white bg-blue-500 rounded-lg hover:bg-blue-600" (click)="addRootFolder()">Add
              Root Folder</button>
          </div>
        </div>
        <app-folder-list [folders]="folderData" (selectFolder)="selectFolder($event)"></app-folder-list>
      </div>

      <div class="w-3/4">
        <h2 *ngIf="selectedFolder" class="mb-2 text-lg font-semibold">Selected Folder: {{ selectedFolder.name }}</h2>

        <div class="flex justify-between mb-2">
          <div>
            <label class="block mb-2 text-sm font-medium text-gray-900" for="image-upload">Upload file</label>
            <input (change)="uploadChangeAction($event)"
              class="block w-48 text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none"
              id="image-upload" type="file">
          </div>
          <div>
            <label class="block mb-2 text-sm font-medium text-gray-900" for="newFolderName">New Sub Folder Name</label>
            <div class="flex items-center">
              <input [(ngModel)]="newFolderName"
                class="w-48 p-2 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none"
                id="newFolderName" type="text">
              <button class="p-2 ml-2 text-white bg-blue-500 rounded-lg hover:bg-blue-600"
                (click)="addSubfolderToFolder()">Add Sub Folder</button>
            </div>
          </div>
        </div>

        <div *ngIf="selectedFolder && selectedFolder.images.length !== 0" class="grid grid-cols-3 gap-4">
          <div *ngFor="let image of selectedFolder.images" class="relative group">
            <img [src]="getSafeImageSource(image.file_base64)"
              class="object-cover w-full transition duration-300 border-2 border-blue-300 rounded-md shadow-xl h-36 group-hover:opacity-75" />
            <div
              class="absolute inset-0 flex items-center justify-center transition duration-300 opacity-0 group-hover:opacity-100">
              <a href="#" (click)="deleteImageAction(image.timestamp)"
                class="p-2 text-white bg-red-500 rounded-lg hover:bg-red-600">Remove</a>
            </div>
            <p class="mt-2 text-center">{{ image.name }}</p>
          </div>
        </div>

        <ul *ngIf="selectedFolder && selectedFolder.images.length === 0">
          <li>No images in this {{ selectedFolder.name }}.</li>
        </ul>
      </div>

    </div>
  </div>
</div>